<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Slide the Banana üçå</title>
  <style>
    :root{
      --bg:#fff8e6; --banana:#ffdf5a; --outline:#caa637; --smoothie:#fff6d9; --accent:#ffd54f; --shadow: rgba(20,20,50,0.08);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial;display:flex;align-items:center;justify-content:center;min-height:100vh;background:linear-gradient(180deg,var(--bg),#fff);color:#222}

    .card{width:360px;padding:20px;border-radius:18px;background:#fffef9;box-shadow:0 10px 30px var(--shadow);text-align:center}
    h1{font-size:20px;margin-bottom:8px}
    p{font-size:13px;color:#555;margin-bottom:14px}

    .stage{position:relative;height:360px;display:flex;align-items:center;justify-content:center}
    .banana-wrap{position:relative;touch-action:none;width:160px;height:320px}
    svg.banana{width:160px;height:320px;display:block}

    .hit{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:16px;cursor:grab}

    .counter{margin-top:12px;font-weight:700}
    .message{margin-top:8px;min-height:20px;color:#0b6}

    .fountain-layer{position:absolute;left:50%;top:6%;width:300px;height:280px;transform:translateX(-50%);pointer-events:none;overflow:visible}

    .jet{filter:drop-shadow(0 6px 10px rgba(0,0,0,0.08));}

    .blob{position:absolute;left:50%;top:6%;transform:translateX(-50%);width:60px;height:60px;border-radius:60px;background:linear-gradient(180deg,var(--smoothie),#fff);opacity:0;box-shadow:0 8px 18px rgba(0,0,0,0.08);}

    .banana-wrap.splash .blob{animation:blob-rise 1200ms ease-out forwards}
    @keyframes blob-rise{
      0%{opacity:1;transform:translateX(-50%) translateY(0) scale(0.8)}
      40%{transform:translateX(-50%) translateY(-40%) scale(1.2)}
      70%{transform:translateX(-50%) translateY(-110%) scale(1.8)}
      100%{opacity:0;transform:translateX(-50%) translateY(-200%) scale(2.2)}
    }

    .banana-wrap.splash .jet-path{stroke-dashoffset:0}
    .jet-path{stroke-dasharray:900;stroke-dashoffset:900;transition:stroke-dashoffset 1000ms cubic-bezier(.2,.9,.3,1)}

    .sheen{position:absolute;left:50%;top:6%;transform:translateX(-50%);width:10px;height:180px;border-radius:8px;background:linear-gradient(180deg,rgba(255,255,255,0.9),rgba(255,255,255,0.1));opacity:0}
    .banana-wrap.splash .sheen{animation:sheen-rise 1300ms ease-out forwards}
    @keyframes sheen-rise{
      0%{opacity:0;transform:translateX(-50%) translateY(0) scaleY(0.6)}
      40%{opacity:0.9}
      100%{opacity:0;transform:translateX(-50%) translateY(-180px) scaleY(1.6)}
    }

    .controls{display:flex;justify-content:center;gap:8px;margin-top:12px}
    button{background:#111;color:#fff;border:0;padding:8px 12px;border-radius:10px;font-weight:600;cursor:pointer}
    button.ghost{background:transparent;color:#111;border:1px solid rgba(0,0,0,0.07)}

    .hint{font-size:12px;color:#888;margin-top:10px}
  </style>
</head>
<body>
  <div class="card">
    <h1>Hi</h1>
   
    <div class="stage">
      <div class="banana-wrap" id="bananaWrap">
        <svg class="banana" viewBox="0 0 120 320" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <defs>
            <linearGradient id="banGrad" x1="0" x2="0" y1="0" y2="1">
              <stop offset="0%" stop-color="#fff7b8" />
              <stop offset="35%" stop-color="#ffef86" />
              <stop offset="100%" stop-color="#ffd24a" />
            </linearGradient>
          </defs>
          <path d="M60 300 C40 270, 30 200, 34 130 C38 70, 54 30, 74 18 C94 30, 108 70, 103 130 C98 200, 84 270, 60 300 Z" fill="url(#banGrad)" stroke="var(--outline)" stroke-width="3"/>
          <rect x="53" y="4" width="14" height="12" rx="3" fill="#6b4f13" />
        </svg>

        <div class="hit" id="hitArea"></div>

        <div class="fountain-layer" id="fountainLayer">
          <svg class="jet" viewBox="-160 -60 320 320" xmlns="http://www.w3.org/2000/svg">
            <path class="jet-path" d="M0 120 C -8 40, -24 0, -8 -40 C 8 -80, 24 -80, 32 -40 C 40 0, 10 40, 0 120 Z" fill="none" stroke="var(--smoothie)" stroke-linecap="round" stroke-linejoin="round" stroke-width="46" opacity="0.98"/>
            <path class="jet-path core" d="M0 120 C -8 40, -24 0, -8 -40 C 8 -80, 24 -80, 32 -40 C 40 0, 10 40, 0 120 Z" fill="none" stroke="#ffffff" stroke-linecap="round" stroke-width="12" opacity="0.7"/>
          </svg>
          <div class="blob" id="blobEl"></div>
          <div class="sheen" id="sheenEl"></div>
        </div>
      </div>
    </div>

    <div class="counter" id="counter">Slides: 0 / 5</div>
    <div class="message" id="message">Keep sliding‚Ä¶</div>

    <div class="controls">
      <button id="resetBtn" class="ghost">Reset</button>
      
    </div>
    <div class="hint">Slide the banana</div>
  </div>

  <script>
    const hit = document.getElementById('hitArea');
    const bananaWrap = document.getElementById('bananaWrap');
    const counterEl = document.getElementById('counter');
    const messageEl = document.getElementById('message');
    const resetBtn = document.getElementById('resetBtn');
    const shareBtn = document.getElementById('shareBtn');

    let dragging = false;
    let prevY = 0;
    let prevDir = null;
    let slides = 0;
    const TARGET = 5;
    const THRESH = 18;

    function updateCounter(){
      counterEl.textContent = `Slides: ${slides} / ${TARGET}`;
      if(slides >= TARGET){ triggerFountain(); }
      else { messageEl.textContent = 'Keep sliding‚Ä¶'; }
    }

    function triggerFountain(){
      if(bananaWrap.classList.contains('splash')) return;

      messageEl.textContent = 'Pressure building...';
      bananaWrap.classList.add('press');

      setTimeout(()=>{
        bananaWrap.classList.remove('press');
        bananaWrap.classList.add('splash');

        const paths = bananaWrap.querySelectorAll('.jet-path');
        paths.forEach(p => {
          const len = p.getTotalLength ? p.getTotalLength() : 900;
          p.style.strokeDasharray = len;
          p.style.strokeDashoffset = len;
          void p.getBoundingClientRect();
          p.style.transition = 'stroke-dashoffset 1000ms cubic-bezier(.2,.9,.3,1)';
          p.style.strokeDashoffset = 0;
        });

        setTimeout(()=>{
          // keep smoothie visible until reset
          messageEl.textContent = 'Thanks for the hand job, buddy';
        }, 1200);
      }, 600);
    }

    function reset(){
      slides = 0;
      prevDir = null;
      bananaWrap.classList.remove('splash');
      updateCounter();
      messageEl.textContent = 'Keep sliding‚Ä¶';
    }

    hit.addEventListener('pointerdown', (e)=>{
      dragging = true; prevY = e.clientY; prevDir = null; hit.setPointerCapture(e.pointerId);
    });

    hit.addEventListener('pointermove', (e)=>{
      if(!dragging) return;
      const y = e.clientY; const dy = y - prevY;
      if(Math.abs(dy) > THRESH){
        const dir = dy > 0 ? 'down' : 'up';
        if(prevDir && dir !== prevDir){
          slides = Math.min(TARGET, slides + 1);
          updateCounter();
        }
        prevDir = dir; prevY = y;
      }
    });

    hit.addEventListener('pointerup', (e)=>{ dragging = false; hit.releasePointerCapture(e.pointerId); });
    hit.addEventListener('pointercancel', ()=>{ dragging = false; });

    resetBtn.addEventListener('click', reset);
    shareBtn.addEventListener('click', async ()=>{
      try{
        await navigator.clipboard.writeText(location.href);
        shareBtn.textContent = 'Copied!';
        setTimeout(()=>shareBtn.textContent = 'Copy link', 1400);
      }catch(e){
        shareBtn.textContent = 'Copy failed';
        setTimeout(()=>shareBtn.textContent = 'Copy link', 1400);
      }
    });

    window.addEventListener('load', ()=>{
      const paths = document.querySelectorAll('.jet-path');
      paths.forEach(p => {
        if(p.getTotalLength){
          const len = p.getTotalLength();
          p.style.strokeDasharray = len;
          p.style.strokeDashoffset = len;
        }
      });
      updateCounter();
    });
  </script>
</body>
</html>
